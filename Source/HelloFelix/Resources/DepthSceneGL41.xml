<?xml version="1.0"?>
<Scene name="TextureScene">
  <Resources>
    <Mesh name="QuadMesh" primitive="strip">
      <Buffer attribute="Position" components="4">
        -0.8,  0.8, 0.5, 1.0,
         0.8,  0.8, 0.5, 1.0,
        -0.8, -0.8, 0.5, 1.0,
         0.8, -0.8, 0.5, 1.0,
      </Buffer>
      <Buffer attribute="UV_0" components="2">
        0.0, 1.0,
        1.0, 1.0,
        0.0, 0.0,
        1.0, 0.0,
      </Buffer>
    </Mesh>
    <Mesh name="TriMesh" primitive="triangles">
      <Buffer attribute="Position" components="4">
        -0.8, -0.6, 0.0, 1.0,
         0.8, -0.6, 0.0, 1.0,
         0.0,  0.8, 0.0, 1.0
      </Buffer>
    </Mesh>
    <Shader name="ColorShader" type="GLSL">
      <Vertex>
        #version 410
        in vec4 Position;
        void main() {gl_Position = Position;}
      </Vertex>
      <Fragment>
        #version 410
        uniform vec4 Color;
        out vec4 FragColor;
        void main() {FragColor = Color;}
      </Fragment>
    </Shader>
    <Shader name="TextureShader" type="GLSL">
      <Vertex>
        #version 410
        in vec4 Position;
        in vec2 UV_0;
        out vec2 UV;
        void main() {
          gl_Position = Position;
          UV = UV_0;
        }
      </Vertex>
      <Fragment>
        #version 410
        in vec2 UV;
        uniform sampler2D tex2D;
        out vec4 FragColor;
        void main() {FragColor = texture(tex2D, UV);}
      </Fragment>
    </Shader>
    <View name="MainView" frame="MainWindow" layer="1" index="2">
      <ClearState>
        <Color0>0.2, 0.2, 0.2, 1.0</Color0>
      </ClearState>
    </View>
    <View name="TestView" layer="0" index="1">
      <Frame name="TestFrame" width="512" height="512">
        <Buffer format="rgba" texture="TestTexture" min="linear" mag="linear"/>
        <Buffer format="depth"/>
      </Frame>
      <ClearState depth="1.0">
        <Color0>0.5, 0.5, 0.5, 1.0</Color0>
      </ClearState>
    </View>
  </Resources>
  <Model name="Quad">
    <RenderSlots>
      <Slot layer="1" mesh="QuadMesh" view="TestView">
        <DepthState write="true" function="less"/>
        <Material shader="ColorShader">
          <UniformMap>
            <Uniform name="Color" type="vec4">0.2, 0.2, 0.9, 1.0</Uniform>
          </UniformMap>
        </Material>
      </Slot>
    </RenderSlots>
  </Model>
  <Model name="Triangle">
    <RenderSlots>
      <Slot layer="0" mesh="TriMesh" view="TestView">
        <DepthState write="true" function="less"/>
        <Material shader="ColorShader">
          <UniformMap>
            <Uniform name="Color" type="vec4">0.9, 0.2, 0.2, 1.0</Uniform>
          </UniformMap>
        </Material>
      </Slot>
    </RenderSlots>
  </Model>
  <Model name="TextureQuad">
    <RenderSlots>
      <Slot layer="0" mesh="QuadMesh" view="MainView">
        <Material shader="TextureShader">
          <TextureMap>
            <Texture name="TestTexture" min="linear" mag="linear"/>
          </TextureMap>
        </Material>
      </Slot>
    </RenderSlots>
  </Model>
</Scene>